import{_ as g,k as A,D as w,d as S,r as C,o as i,e as c,b as e,t as a,g as _,h as R,a as m,w as b,f as p,i as f,v as U,n as k,l as B,F as P,j as V}from"./main-a6d67f0f.js";const j={props:["account"],data(){return{baseAmount:"",baseDenom:"",dysAmount:"",error:"",txResult:null,bgUrl:new URL("/assets/create-bg-1127111c.jpg",self.location).href,balanceStore:A()}},components:{DenomUnitConverter:w},computed:{address:function(){var t;return(t=this.account)==null?void 0:t.bech32Address},coins:function(){return this.baseAmount+" "+this.baseDenom+" , "+this.dysAmount+" dys"},validDenoms:function(){return Object.keys(this.balanceStore.balances).filter(t=>!t.startsWith("pool-")&&!t.endsWith(".whaleswap.dys")&&t!=="dys")}},methods:{async createPool(){this.txResult=null,this.error=null,console.log("createPool");let t="dyson/sendMsgRun",o={value:{creator:this.address,address:"whaleswap.dys",function_name:"create_pool",coins:this.coins},fee:[{amount:"223",denom:"dys"}],gas:"2230000"};try{console.log(o),this.txResult=await S(t,o),this.baseAmount="",this.baseDenom="",this.dysAmount="",console.log(this.txResult)}catch(d){console.log(d.toString()),this.error=d.toString()}}},watch:{baseDenom:function(t){this.baseAmount=""},address:function(t){console.log("address changed, fetching balances",t),this.balanceStore.fetchBalances(t)}},mounted(){this.balanceStore.fetchBalances(this.address)}},I=e("div",{class:"hero-overlay bg-opacity-50"},null,-1),L={class:"hero-content text-center"},M={class:"py-10 lg:pl-72"},N={class:"px-4 sm:px-6 lg:px-8"},T={class:"max-w-md"},W={key:0,class:"text-success"},E={class:"card md:w-96 bg-base-200 m-auto"},F={class:"card-body items-center text-center"},Y=e("h2",{class:"card-title"},"Create Pool",-1),q={class:"form-control w-full"},z=e("label",{class:"label",for:"baseDenom"},[e("span",{class:"label-text"},"Base Denom")],-1),H=["value"],O={class:"form-control w-full"},Q=e("label",{class:"label",for:"baseAmount"},[e("span",{class:"label-text"},"Base Amount")],-1),G=["value","onInput"],J={class:"label"},K={class:"label-text text-secondary"},X={class:"form-control w-full"},Z=e("label",{class:"label",for:"dysAmount"},[e("span",{class:"label-text"},"Quote Amount in DYS")],-1),$={class:"label"},ee={class:"label-text"},se={key:0,class:"text-red-500"},te={class:"card-actions"},oe=["disabled"];function ne(t,o,d,le,s,r){var h;const u=C("DenomUnitConverter");return i(),c("div",{class:"hero min-h-screen",style:k({backgroundImage:`url(${s.bgUrl})`})},[I,e("div",L,[e("div",M,[e("div",N,[e("div",T,[(h=s.txResult)!=null&&h.result?(i(),c("div",W,[e("p",null," Congratulations! A new pool has been successfully created with Pool ID "+a(s.txResult.result.pool_id)+". You have received "+a(s.txResult.result.total_shares)+" "+a(s.txResult.result.shares_denom)+" liquidity shares. The transaction hash is "+a(s.txResult.transactionHash)+". ",1)])):_("",!0),e("div",E,[e("form",{onSubmit:o[4]||(o[4]=R((...n)=>r.createPool&&r.createPool(...n),["prevent"]))},[e("div",F,[Y,m(u,{internalDenom:s.baseDenom,"onUpdate:internalDenom":o[1]||(o[1]=n=>s.baseDenom=n),internalAmount:s.baseAmount,"onUpdate:internalAmount":o[2]||(o[2]=n=>s.baseAmount=n)},{default:b(({displayAmount:n,displayDenom:v,handleDisplayChange:y})=>[e("div",q,[z,f(e("select",{id:"baseDenom","onUpdate:modelValue":o[0]||(o[0]=l=>s.baseDenom=l),class:"select select-bordered w-full max-w-xs"},[(i(!0),c(P,null,V(r.validDenoms,l=>(i(),c("option",{value:l,key:r.address+l},[m(u,{internalDenom:l},{default:b(({displayDenom:x,displayName:D})=>[p(a(x.toUpperCase())+" "+a(D),1)]),_:2},1032,["internalDenom"])],8,H))),128))],512),[[B,s.baseDenom]])]),e("div",O,[Q,e("input",{id:"baseAmount",value:n,onInput:l=>y(v,l.target.value),type:"text",class:"input input-bordered join-item input-primary"},null,40,G),m(u,{internalDenom:s.baseDenom,internalAmount:s.balanceStore.balances[s.baseDenom]},{default:b(({displayAmount:l})=>[e("label",J,[e("span",K," Available: "+a(l.toLocaleString()),1)])]),_:2},1032,["internalDenom","internalAmount"])])]),_:1},8,["internalDenom","internalAmount"]),p(" = "),e("div",X,[Z,f(e("input",{id:"dysAmount","onUpdate:modelValue":o[3]||(o[3]=n=>s.dysAmount=n),type:"text",class:"input input-bordered join-item input-primary"},null,512),[[U,s.dysAmount]]),e("label",$,[e("span",ee," Available: "+a((s.balanceStore.balances.dys||0).toLocaleString()),1)])]),s.error?(i(),c("div",se,"Error: "+a(s.error),1)):_("",!0),e("div",te,[e("button",{class:"btn btn-primary",disabled:!r.address,type:"submit"}," Create Pool ",8,oe)])])],32)])])])])])],4)}const re=g(j,[["render",ne]]);export{re as default};
